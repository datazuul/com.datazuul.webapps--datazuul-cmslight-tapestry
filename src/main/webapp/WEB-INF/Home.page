<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC
  "-//Apache Software Foundation//Tapestry Specification 3.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_3_0.dtd">
<!-- generated by Spindle, http://spindle.sourceforge.net -->

<page-specification class="com.datazuul.webapps.cmslight.pages.Home">
  <description>Login-Seite von CMS light</description>

  <bean name="delegate" class="com.datazuul.webapps.cmslight.validation.ValidationDelegate" lifecycle="request" />
  <bean name="required" class="org.apache.tapestry.valid.StringValidator" lifecycle="page">
    <set-property name="required" expression="true"/>
    <set-property name="clientScriptingEnabled" expression="false"/>
  </bean>

  <bean name="userNameValidator" class="org.apache.tapestry.valid.StringValidator" lifecycle="page">
    <set-property name="required" expression="true"/>
    <set-property name="minimumLength" expression="3"/>
    <!-- <set-property name="maximumLength" expression="50"/> -->
    <set-property name="clientScriptingEnabled" expression="false"/>
  </bean>
  <bean name="passwordValidator" class="org.apache.tapestry.valid.StringValidator" lifecycle="page">
    <set-property name="required" expression="true"/>
    <set-property name="minimumLength" expression="3"/>
    <!-- <set-property name="maximumLength" expression="16"/> -->
    <set-property name="clientScriptingEnabled" expression="false"/>
  </bean>

  <component id="hasMessages" type="Conditional">
    <binding name="condition" expression="hasMessages"/>
  </component>
  <component id="messageList" type="Foreach">
    <binding name="source" expression="errorMessages"/>
    <binding name="value"  expression="error" />
<!--    <binding name="index" expression="errorIndex" /> -->
  </component>
  <component id="error" type="Insert">
    <binding name="value" expression="error"/>
    <static-binding name="raw" value="true"/>
  </component>

  <component id="linkEnglish" type="DirectLink">
    <binding name="listener" expression="listeners.setEnglish"/>
  </component>
  <component id="linkGerman" type="DirectLink">
    <binding name="listener" expression="listeners.setGerman"/>
  </component>

  <component id="lblPassword" type="FieldLabel">
    <binding name="field" expression="components.inputPassword"/>
    <message-binding name="displayName" key="your_password"/>
  </component>
  <component id="lblUsername" type="FieldLabel">
    <binding name="field" expression="components.inputUserName"/>
    <message-binding name="displayName" key="your_username"/>
  </component>

  <component id="form" type="Form">
    <binding name="delegate" expression="beans.delegate"/>
    <binding name="listener" expression="listeners.login"/>
  </component>

  <component id="imgEnglishFlag" type="Image">
    <binding name="image" expression="assets.flag_en"/>
    <message-binding name="alt" key="english"/>
    <message-binding name="title" key="english"/>
  </component>
  <component id="imgGermanFlag" type="Image">
    <binding name="image" expression="assets.flag_de"/>
    <message-binding name="alt" key="german"/>
    <message-binding name="title" key="german"/>
  </component>

  <component id="submit" type="Submit">
    <message-binding name="label" key="submit"/>
  </component>

  <component id="inputPassword" type="ValidField">
    <static-binding name="displayName" value="Ihr Passwort"/>
    <static-binding name="hidden" value="true"/>
    <binding name="validator" expression="beans.passwordValidator"/>
    <binding name="value" expression="password"/>
  </component>
  <component id="inputUserName" type="ValidField">
    <static-binding name="displayName" value="Ihr Benutzername"/>
    <binding name="validator" expression="beans.userNameValidator"/>
    <binding name="value" expression="userName"/>
  </component>
  
  <property-specification name="message" type="java.lang.String"/>
  <property-specification name="userName" type="java.lang.String"/>
  <property-specification name="password" type="java.lang.String"/>
  
  <context-asset name="stylesheet" path="css/global.css"/>
  <context-asset name="flag_de" path="images/flags/flag_de.gif"/>
  <context-asset name="flag_en" path="images/flags/flag_en.gif"/>
</page-specification>
