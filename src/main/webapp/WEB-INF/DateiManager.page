<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE page-specification PUBLIC
  "-//Apache Software Foundation//Tapestry Specification 3.0//EN"
  "http://jakarta.apache.org/tapestry/dtd/Tapestry_3_0.dtd">
<!-- generated by Spindle, http://spindle.sourceforge.net -->

<page-specification class="com.datazuul.webapps.cmslight.pages.DateiManager">
  <description>Liste der Dateien und Verzeichnisse eines Verzeichnisses</description>
  
  <property-specification name="deleteItem" type="com.datazuul.webapps.cmslight.filesystem.FileWrapper"/>
  <property-specification name="editItem" type="com.datazuul.webapps.cmslight.filesystem.FileWrapper"/>
  <property-specification name="fileList" type="java.util.ArrayList" persistent="yes"/>
  <property-specification name="filepath" type="java.lang.String" persistent="yes"/>
  <property-specification name="item" type="com.datazuul.webapps.cmslight.filesystem.FileWrapper"/>
  <property-specification name="parent" type="com.datazuul.webapps.cmslight.filesystem.HRef"/>
  <property-specification name="parentIndex" type="int"/>
  <property-specification name="selectedItems" type="java.util.HashMap" persistent="yes" initial-value="new java.util.HashMap()"/>

  <!-- table -->
  <property-specification name="row"/>
  <bean name="evenOdd" class="org.apache.tapestry.bean.EvenOdd"/>
  <component id="tableView" type="contrib:TableView">
    <binding name="source" expression="fileList"/>
    <static-binding name="columns" value="* type:type, name:name, size:size, last_changed:lastModified" />
    <static-binding name="initialSortColumn" value="name"/>
	</component>
	<component id="tableColumns" type="contrib:TableColumns"/>
  <component id="tableValues" type="contrib:TableValues"/>
  <component id="tableFormRows" type="contrib:TableFormRows">
    <binding name="row" expression="item"/>
    <binding name="class" expression="beans.evenOdd.next"/>
	</component>
  <component id="checkbox" type="Checkbox">
    <binding name="selected" expression="checkboxSelected"/>
  </component>
        
  <component id="doAdd" type="Submit">
    <binding name="listener" expression="listeners.addNewItem"/>
    <message-binding name="label" key="new"/>
  </component>
  <component id="doDelete" type="ImageSubmit">
    <binding name="image" expression="assets.delete"/>
    <binding name="selected" expression="deleteItem"/>
    <binding name="tag" expression="item"/>
    <message-binding name="alt" key="delete"/>
    <message-binding name="title" key="delete"/>
  </component>
  <component id="doEdit" type="ImageSubmit">
    <binding name="image" expression="assets.edit"/>
    <binding name="selected" expression="editItem"/>
    <binding name="tag" expression="item"/>
    <message-binding name="alt" key="edit"/>
    <message-binding name="title" key="edit"/>
  </component>
  <component id="doGo" type="Submit">
    <binding name="listener" expression="listeners.doAction"/>
    <message-binding name="label" key="go"/>
  </component>
  <component id="doView" type="GenericLink">
    <binding name="href" expression="itemUrl"/>
  </component>

  <component id="file" type="Image">
    <binding name="image" expression="assets.file"/>
    <message-binding name="alt" key="file"/>
    <message-binding name="title" key="file"/>
  </component>
  <component id="filename" type="Insert">
    <binding name="value" expression="item.name"/>
  </component>
  <component id="filename2" copy-of="filename"/>
  <component id="filenameEditLink" type="DirectLink">
    <binding name="listener" expression="listeners.editFile"/>
    <binding name="parameters" expression="item.uid"/>
  </component>
  <component id="folder" type="Image">
    <binding name="image" expression="assets.folder"/>
    <message-binding name="alt" key="folder"/>
    <message-binding name="title" key="folder"/>
  </component>
  <component id="form" type="Form">
    <binding name="listener" expression="listeners.formSubmit"/>
  </component>
  <component id="hasFileActions" type="Conditional">
    <binding name="condition" expression="!item.isDirectory"/>
  </component>
  <component id="isDirectory" type="Conditional">
    <binding name="condition" expression="item.isDirectory"/>
  </component>
  <component id="isEditable" type="Conditional">
    <binding name="condition" expression="item.isEditable"/>
  </component>
  <component id="isEditable2" copy-of="isEditable"/>
  <component id="isNotEditable" type="Conditional">
    <binding name="condition" expression="!item.isEditable"/>
  </component>
  <component id="isFile" type="Conditional">
    <binding name="condition" expression="!item.isDirectory"/>
  </component>
  <component id="isLastNaviItem" type="Conditional">
    <binding name="condition" expression="parentIndex == (visit.lastFolder.numberOfParents - 1)"/>
  </component>
  <component id="isNotLastNaviItem" type="Conditional">
    <binding name="condition" expression="parentIndex != (visit.lastFolder.numberOfParents - 1)"/>
  </component>
  <component id="lastModified" type="Insert">
    <binding name="value" expression="item.lastModified"/>
  </component>
  <component id="urlWebsite" type="GenericLink">
    <binding name="href" expression="visit.user.firstWebsite.url"/>
  </component>
  <component id="urlWebsiteText" type="Insert">
    <binding name="value" expression="visit.user.firstWebsite.url"/>
  </component>
  <component id="navigationList" type="Foreach">
    <binding name="source" expression="visit.lastFolder.parents"/>
    <binding name="value"  expression="parent" />
    <binding name="index" expression="parentIndex" />
  </component>
  <component id="navigationLink" type="DirectLink">
		<binding name="listener" expression="listeners.changeDirectory"/>
 		<binding name="parameters" expression="parent.link"/>
 		<binding name="disabled" expression="false"/>
  </component>
  <component id="navigationText" type="Insert">
    <binding name="value" expression="parent.display"/>
  </component>
  <component id="lastNavigationText" copy-of="navigationText" />
  <component id="selected" type="Checkbox">
    <binding name="selected" expression="item.selected"/>
  </component>
  <component id="size" type="Insert">
    <binding name="value" expression="item.size"/>
  </component>
  <component id="tableActions" type="PropertySelection">
    <binding name="model" expression="actionModel"/>
    <binding name="value" expression="action"/>
  </component>
  <component id="view" type="Image">
    <binding name="image" expression="assets.view"/>
    <message-binding name="alt" key="view"/>
    <message-binding name="title" key="view"/>
  </component>
  
  <context-asset name="upArrow" path="images/arrow_up.png"/>
  <context-asset name="downArrow" path="images/arrow_down.png"/>

  <context-asset name="delete" path="images/trash.gif"/>
  <context-asset name="edit" path="images/pen.gif"/>
  <context-asset name="file" path="images/file.gif"/>
  <context-asset name="folder" path="images/folder.gif"/>
  <context-asset name="view" path="images/eye.gif"/>
</page-specification>
